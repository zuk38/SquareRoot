(this["webpackJsonpsquare-root"]=this["webpackJsonpsquare-root"]||[]).push([[76],{563:function(e,n,t){"use strict";var s=t(19),a=t(12),c=t(20),i=t(1);n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(i.useState)(t),o=Object(c.a)(r,2),l=o[0],d=o[1],u=Object(i.useState)({}),j=Object(c.a)(u,2),p=j[0],m=j[1],b=Object(i.useState)(!1),O=Object(c.a)(b,2),h=O[0],x=O[1],f=Object(i.useState)(!1),N=Object(c.a)(f,2),v=N[0],g=N[1];Object(i.useEffect)((function(){0===Object.keys(p).length&&v&&(n&&n(),_())}),[p,v]),Object(i.useEffect)((function(){h&&m(e(l))}),[l]);var C=function(e){var n=e.target,t=n.id,c=n.value,i=n.name,r=void 0===t?i:t;d(Object(a.a)(Object(a.a)({},l),{},Object(s.a)({},r,c))),g(!1)},T=function(n){n.preventDefault(),m(e(l)),x(!0),g(!0)},_=function(){d(t),m({}),x(!1),g(!1)};return{values:l,setValues:d,errors:p,setErrors:m,handleChange:C,handleSubmit:T,resetForm:_}}},683:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return r})),t.d(n,"d",(function(){return i}));function s(e){return"string"==typeof e&&(!isNaN(e)&&!isNaN(parseFloat(e)))}function a(e,n){var t;e.email?(t=e.email,/^((\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)\s*[;]{0,1}\s*)+$/.test(String(t).toLowerCase())||(n.email="E-mail adress is invalid")):n.email="E-mail adress is required"}function c(e,n){e.name?e.name.length>40&&(n.name="Name too long"):n.name="Name is required"}function i(e,n){e.zip?s(e.zip)&&4===e.zip.length||(n.zip="Invalid zip code"):n.zip="Zip code is required"}function r(e,n){e.address||(n.address="Address is required")}},972:function(e,n,t){"use strict";t.r(n);var s=t(20),a=t(1),c=t.n(a);t.p;t.p;t.p;t.p;t.p;t.p;t.p;var i=t(680),r=t.n(i),o=t(35),l=t(12),d=t(8),u=t.n(d),j=t(621),p=t(488),m=t(492),b=t(552),O=t(558),h=t(220),x=t(363),f=t(98),N="\n  query ListMembers(\n    $filter: ModelMemberFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listMembers(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        username\n        role\n        name\n        projects {\n          nextToken\n        }\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",v="\n  query ListProjects(\n    $filter: ModelProjectFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listProjects(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        name\n        address\n        city\n        postalCode\n        end_date\n        owner\n        createdAt\n        updatedAt\n        greenspaces {\n          items {\n            id\n            name\n            description\n            concepts {\n              items {\n                name\n              }\n            }\n          }\n        }\n        members {\n          items {\n            member {\n              username\n              role\n              name\n            }\n          }\n        }\n      }\n      nextToken\n    }\n  }\n",g=t(996),C="\n  mutation CreateProject(\n    $input: CreateProjectInput!\n    $condition: ModelProjectConditionInput\n  ) {\n    createProject(input: $input, condition: $condition) {\n      id\n      name\n      address\n      city\n      postalCode\n      end_date\n      owner\n      members {\n        items {\n          id\n          project_ID\n          member_ID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n      greenspaces {\n        items {\n          id\n          project_ID\n          name\n          description\n          owner\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n    }\n  }\n",T="\n  mutation UpdateProject(\n    $input: UpdateProjectInput!\n    $condition: ModelProjectConditionInput\n  ) {\n    updateProject(input: $input, condition: $condition) {\n      id\n      name\n      address\n      city\n      postalCode\n      end_date\n      owner\n      members {\n        items {\n          id\n          project_ID\n          member_ID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n      greenspaces {\n        items {\n          id\n          project_ID\n          name\n          description\n          owner\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n    }\n  }\n",_="\n  mutation CreateProjectMember(\n    $input: CreateProjectMemberInput!\n    $condition: ModelProjectMemberConditionInput\n  ) {\n    createProjectMember(input: $input, condition: $condition) {\n      id\n      project_ID\n      member_ID\n      project {\n        id\n        name\n        address\n        city\n        postalCode\n        end_date\n        owner\n        members {\n          nextToken\n        }\n        createdAt\n        updatedAt\n        greenspaces {\n          nextToken\n        }\n      }\n      member {\n        id\n        username\n        role\n        name\n        projects {\n          nextToken\n        }\n        createdAt\n        updatedAt\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",A="\n  mutation CreateMember(\n    $input: CreateMemberInput!\n    $condition: ModelMemberConditionInput\n  ) {\n    createMember(input: $input, condition: $condition) {\n      id\n      username\n      role\n      name\n      projects {\n        items {\n          id\n          project_ID\n          member_ID\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",S=t(3),M=c.a.createContext(),P=(a.Component,M.Consumer);function k(e){return function(n){return Object(S.jsx)(P,{children:function(t){return Object(S.jsx)(e,Object(l.a)(Object(l.a)({},n),{},{context:t}))}})}}var E=t(818),y=t(563),w=t(683);function I(e){var n={};return Object(w.c)(e,n),Object(w.a)(e,n),Object(w.d)(e,n),n}var R=t(744),$=t(987),D=t(940),L=t(817),z=t.n(L),F=t(741),q=t(1007),U=Object(R.a)((function(e){return{margin:{margin:e.spacing(1)}}}));function B(e){var n=U();return Object(S.jsx)(D.a,{fullWidth:!0,className:n.margin,variant:"outlined",children:Object(S.jsx)($.a,{name:e.name,defaultValue:e.value,type:"text",disabled:!e.editMode,variant:"outilned",onChange:function(n){return e.onChange(n)},endAdornment:Object(S.jsx)(q.a,{position:"end",children:Object(S.jsx)(F.a,{"aria-label":"edit field",onClick:function(){return e.setEditMode(!0)},children:Object(S.jsx)(z.a,{})})})})})}function K(e){var n=e.values,t=e.errors,s=e.handleChange,a=e.handleSubmit,c=e.page,i=e.editMode,r=e.setEditMode,o=e.project;return Object(S.jsx)("form",{children:c?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{style:{width:"80%"},children:[Object(S.jsx)("label",{className:"p-lbl",children:"Navn"}),Object(S.jsx)(B,{value:n.name||o.name,name:"name",editMode:i.nameMode,setEditMode:function(){return r("nameMode",!0)},onChange:function(e){return s(e,i)}}),t.name&&Object(S.jsx)("p",{className:"help is-danger",children:t.name}),Object(S.jsx)("label",{className:"p-lbl",children:"Adresse"}),Object(S.jsx)(B,{value:n.address||o.address,name:"address",editMode:i.addressMode,setEditMode:function(){return r("addressMode",!0)},onChange:function(e){return s(e,i)}}),t.address&&Object(S.jsx)("p",{className:"help is-danger",children:t.address}),Object(S.jsxs)("div",{className:"p-flex",children:[Object(S.jsxs)("div",{className:"p-classFlex",children:[Object(S.jsx)("label",{className:"p-lblFlex",children:"PostNr"}),Object(S.jsx)(B,{value:n.zip||o.postalCode,name:"zip",editMode:i.zipMode,setEditMode:function(){return r("zipMode",!0)},onChange:function(e){return s(e,i)}}),t.zip&&Object(S.jsx)("p",{className:"help is-danger",children:t.zip})]}),Object(S.jsxs)("div",{className:"p-classFlex",children:[Object(S.jsx)("label",{className:"p-lblFlex",children:"Poststed"}),Object(S.jsx)("input",{type:"text",className:"p-input-inline p-text-input",value:n.city||o.city,disabled:!0,onChange:s})]})]})]}),Object(S.jsx)("div",{className:"p-btn-create",children:Object(S.jsx)("button",{type:"submit",onClick:function(e){return a(e,i)},disabled:!i.nameMode&&!i.addressMode&&!i.zipMode,children:"OPPRETT PROSJEKT"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"p-inputBox",children:[Object(S.jsx)("label",{className:"p-lbl",children:"Navn"}),Object(S.jsx)("input",{type:"text",name:"name",placeholder:"Prosjektets navn..",className:"p-inp-text p-text-input",value:n.name||"",onChange:s}),t.name&&Object(S.jsx)("p",{className:"help is-danger",children:t.name}),Object(S.jsx)("label",{className:"p-lbl",children:"Adresse"}),Object(S.jsx)("input",{type:"text",name:"address",placeholder:"Prosjektets adresse..",className:"p-inp-text p-text-input",value:n.address||"",onChange:s}),t.address&&Object(S.jsx)("p",{className:"help is-danger",children:t.address}),Object(S.jsxs)("div",{className:"p-flex",children:[Object(S.jsxs)("div",{className:"p-classFlex",children:[Object(S.jsx)("label",{className:"p-lblFlex",children:"PostNr"}),Object(S.jsx)("input",{type:"text",name:"zip",className:"p-input-inline p-text-input",pattern:"[0-9]{4}",value:n.zip||"",onChange:s}),t.zip&&Object(S.jsx)("p",{className:"help is-danger",children:t.zip})]}),Object(S.jsxs)("div",{className:"p-classFlex",children:[Object(S.jsx)("label",{className:"p-lblFlex",children:"Poststed"}),Object(S.jsx)("input",{type:"text",className:"p-input-inline p-text-input",value:n.city||"",disabled:!0,onChange:s})]})]})]}),Object(S.jsx)("div",{className:"p-btn-create",children:Object(S.jsx)("button",{type:"submit",className:"project-modal-btn",onClick:a,children:"OPPRETT PROSJEKT"})})]})})}var W=function(){var e=Object(j.a)(u.a.mark((function e(n){var t,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("https://api.bring.com/pickuppoint/api/postalCode/NO/getCityAndType/"+n.toString()+".json"),{method:"get",headers:{"X-MyBring-API-Uid":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYBRING_UID,"X-MyBring-API-Key":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYBRING_API,"X-Bring-Client-URL":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYBRING_CLIENT_URL,Accept:"application/json, text/plain, */*","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Methods":"GET, POST, OPTIONS"}}).then((function(e){if(console.log(e),e.ok)return e.json();throw new Error("Something went wrong ...")})).catch((function(e){return console.log(e)}));case 2:if(!(t=e.sent)){e.next=7;break}return s=(s=t.postalCode.city.toString()).slice(0,1)+s.slice(1,s.length).toLowerCase(),e.abrupt("return",s);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var H=k((function(e){var n=e.isOpen,t=e.setModal,s=e.context,c=s.projects,i=s.fetchProjects,o=s.createProject,l=Object(y.a)((function(){return x.apply(this,arguments)}),I,(function(){return f.apply(this,arguments)})),d=l.values,p=l.errors,m=l.handleChange,b=l.handleSubmit,O=l.setCity,h=l.setProjectExistsErrors;function x(){return(x=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(),t(!1);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(d);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d.zip&&""!==d.zip&&4==d.zip.length&&W(d.zip).then((function(e){O(e)}))}),[d.zip]),Object(a.useEffect)((function(){if(d.name&&""!==d.name&&c.length){var e=c.find((function(e){return e.name===d.name}));h(e)}}),[d.name]),Object(S.jsxs)(r.a,{isOpen:n,onRequestClose:function(){return t(!1)},className:"modal-project",children:[Object(S.jsx)("button",{onClick:function(){return t(!1)},className:"btn-modal-close",alt:"Lukk",children:Object(S.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(S.jsxs)("div",{className:"p-modal-content",children:[Object(S.jsx)("h1",{className:"p-h1",children:"La oss lage et \xf8kosystem"}),Object(S.jsx)("br",{}),Object(S.jsx)("h2",{className:"p-h2",children:"Fortell oss litt mer om prosjektet"}),Object(S.jsx)(K,{handleChange:m,handleSubmit:b,values:d,errors:p})]})]})}));var V=k((function(e){var n=Object(a.useState)(null),t=Object(s.a)(n,2),c=(t[0],t[1]),i=Object(a.useState)(!1),o=Object(s.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(!1),j=Object(s.a)(u,2),p=j[0],m=j[1],b=document.getElementsByClassName("btn-group-button"),O=e.context.projects,h=function(){for(var e=0;e<b.length;e++)b[e].classList.remove("selected")},x=function(e){m(e),c(null),h()},f=function(){d(!l)};return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(r.a,{isOpen:e.isOpen,onRequestClose:e.closeModal,className:"add-to-project-modal",contentLabel:"Add To Project Modal",closeTimeoutMS:500,children:[Object(S.jsx)("button",{onClick:e.closeModal,className:"btn-plant-modal-close",alt:"Lukk",children:Object(S.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(S.jsx)("h1",{children:"Select Project"}),Object(S.jsxs)("div",{className:"btn-group",children:[Object(S.jsxs)("button",{onMouseEnter:f,onMouseLeave:f,onClick:function(){return x(!0)},children:[l&&Object(S.jsx)(E.a,{})," Add new project"]}),O.map((function(e){return Object(S.jsxs)("button",{id:e.id,onClick:function(){return function(e){c(e),h(),document.getElementById(e.id).classList.add("selected")}(e)},className:"btn-group-button",children:[e.name,", ",e.address," ",e.city]},e.id)}))]}),Object(S.jsx)("button",{className:"btn-continue",children:"Continue"})]}),p&&Object(S.jsx)(H,{isOpen:p,setModal:x})]})})),G=t(13);n.default=function(e){var n=Object(a.useState)(!1),t=Object(s.a)(n,2),c=t[0],i=t[1],o=Object(a.useState)(!1),l=Object(s.a)(o,2),d=l[0],u=l[1],j=Object(G.h)();return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"greenspace",children:[Object(S.jsxs)("div",{className:"greenspaceinfo",children:[Object(S.jsx)("button",{className:"button is-medium is-fullwidth",children:"Velg by"}),Object(S.jsxs)("div",{className:"options",children:[Object(S.jsx)("div",{className:"tilpass",children:Object(S.jsx)("a",{className:"button is-medium is-light is-fullwidth",href:"/customize/".concat(j.name),children:"Tilpass"})}),Object(S.jsxs)("button",{className:"button is-medium is-dark is-fullwidth",onClick:function(){return u(!0)},children:["Legg til i prosjekt",Object(S.jsx)("i",{className:"fas fa-chevron-right"})]})]})]}),Object(S.jsxs)("div",{className:"requirements",children:[Object(S.jsx)("h5",{children:"OSLO"}),Object(S.jsxs)("div",{className:"func",children:[Object(S.jsx)("h4",{children:"Functional Requirements:"}),Object(S.jsx)("h4",{children:"Maintenance Needs:"}),Object(S.jsx)("div",{className:"func_info"}),Object(S.jsx)("div",{className:"main_info",children:Object(S.jsx)("div",{className:"req_box",children:Object(S.jsx)("div",{className:"req_info"})})})]})]}),Object(S.jsx)("div",{className:"description",children:Object(S.jsxs)("div",{className:"desc",children:[Object(S.jsx)("h4",{children:"Description"}),Object(S.jsx)("div",{className:"desc_info",children:" "})]})}),Object(S.jsxs)("div",{className:"plantlist",children:[Object(S.jsxs)("button",{className:"button is-medium is-light is-fullwidth",onClick:function(){return i(!0)},children:["Se hele plantelisten",Object(S.jsx)("i",{className:"fas fa-chevron-right"})]}),Object(S.jsxs)(r.a,{isOpen:c,onRequestClose:function(){return i(!1)},className:"modal-dashboard",children:[Object(S.jsx)("button",{onClick:function(){return i(!1)},className:"btn-modal-close",alt:"Lukk",children:Object(S.jsx)("i",{className:"fas fa-times fa-lg"})}),Object(S.jsxs)("div",{className:"d-modal-content",children:[Object(S.jsx)("h1",{className:"p-h1"}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"d-modal-container",children:Object(S.jsx)("table",{className:"d-table",children:Object(S.jsx)("tbody",{})})})]})]})]}),d&&Object(S.jsx)(V,{isOpen:d,openModal:function(){return u(!0)},closeModal:function(){return u(!1)}})]})})}}}]);
//# sourceMappingURL=76.0a0d2e6e.chunk.js.map